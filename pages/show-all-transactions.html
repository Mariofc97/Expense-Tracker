<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="../assets/fontawesome/css/fontawesome.css" rel="stylesheet">
    <link href="../assets/fontawesome/css/brands.css" rel="stylesheet">
    <link href="../assets/fontawesome/css/solid.css" rel="stylesheet">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/dashboard.css" />

</head>

<body>
    <nav class="d-flex justify-content-between py-3 p-5">
        <a href="../index.html">
            <i class="fa-solid fa-arrow-left"></i> Back
        </a>
        <div></div>
    </nav>

    <main class="container">
        <h2 class="text-center mt-4">All Transactions</h2>
        <div id="allExpenseList" class="m-5"></div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const expenseListContainer = document.getElementById("allExpenseList");
            const expenses = JSON.parse(localStorage.getItem("expenses")) || [];

            if (expenses.length === 0) {
                expenseListContainer.innerHTML = "<p class='text-muted'>No expenses recorded.</p>";
                return;
            }

            expenses.reverse().forEach((expense) => {
                const expenseItem = document.createElement("div");
                expenseItem.classList.add(
                    "expense-item",
                    "d-flex",
                    "justify-content-between",
                    "align-items-center",
                    "p-3",
                    "mb-3"
                );

                expenseItem.innerHTML = `
                    <div class="d-flex align-items-center">
                        <div class="icon-box ${expense.category.toLowerCase()}">
                            ${getCategoryIcon(expense.category)}
                        </div>
                        <div class="ms-3">
                            <h6 class="mb-1">${capitalizeFirstLetter(expense.category)}</h6>
                            <p class="text-muted small">${expense.description}</p>
                        </div>
                    </div>
                    <div class="text-end">
                        <h6 class="text-danger">- $${expense.amount}</h6>
                        <p class="text-muted small">${formatDate(expense.date)}</p>
                    </div>
                `;

                expenseListContainer.appendChild(expenseItem);
            });
        });

        function getCategoryIcon(category) {
            const icons = {
                shopping: "üõçÔ∏è",
                food: "üçΩÔ∏è",
                subscription: "üìÑ",
                transportation: "üöó",
            };
            return icons[category.toLowerCase()] || "üí∞";
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString("en-US", {
                day: "2-digit",
                month: "2-digit",
                year: "2-digit",
            });
        }
    </script>
</body>

</html>